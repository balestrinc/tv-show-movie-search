(this["webpackJsonptv-show-search"]=this["webpackJsonptv-show-search"]||[]).push([[0],{26:function(e,t,n){e.exports=n.p+"static/media/logo.ac23d307.svg"},35:function(e,t,n){e.exports=n(72)},41:function(e,t,n){},43:function(e,t,n){},44:function(e,t,n){},50:function(e,t,n){},68:function(e,t,n){},69:function(e,t,n){},70:function(e,t,n){},71:function(e,t,n){},72:function(e,t,n){"use strict";n.r(t);n(36);var a=n(0),c=n.n(a),r=n(25),l=n.n(r),o=(n(41),n(42),n(10)),s=n(6),i=(n(43),n(26)),u=n.n(i),m=(n(44),function(){return c.a.createElement(o.b,{to:"/search",className:"searchLink"},c.a.createElement("header",{id:"homeHeader",className:"homeHeader"},c.a.createElement("img",{src:u.a,className:"appLogo",alt:"logo"}),"TV Show Search"))}),h=n(8),d=n(29),f=n(30),p=n(34),E=n(33),v=(n(50),function(e){Object(p.a)(n,e);var t=Object(E.a)(n);function n(){return Object(d.a)(this,n),t.apply(this,arguments)}return Object(f.a)(n,[{key:"componentDidMount",value:function(){this.inputRef.focus()}},{key:"render",value:function(){var e=this,t=this.props,n=t.phrase,a=t.onPhraseChange,r=t.onSearchClick;return c.a.createElement("div",null,c.a.createElement("input",{className:"phraseInput",ref:function(t){e.inputRef=t},placeholder:"To search shows, type its name\u2026",value:n,onChange:function(e){return a(e.target.value)},id:"phraseInput"}),c.a.createElement("button",{className:"buttonSearch",onClick:function(){return r()},id:"buttonSearch"},"Search"))}}]),n}(c.a.Component)),g=n(11),S=n(31),w=n.n(S),b="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7",A=function(e){return{id:e.id,title:e.name,images:{medium:e.image&&e.image.medium?e.image.medium:b,original:e.image&&e.image.original?e.image.original:b},duration:e.runtime,schedule:e.schedule,status:e.status,showType:e.type,genres:e.genres}},y=function(e){var t=e.find((function(e){return"Creator"===e.type}));return t?t.person.name:""},T=function(e){var t=A(e),n=e._embedded.cast.map((function(e){return e.person.name})),a=[],c=e._embedded.episodes;return c.forEach((function(e){if(!a.find((function(t){return t.season===e.season}))){var t=c.filter((function(t){return t.season===e.season})).map((function(e){return{id:e.id,name:e.name,number:e.number}}));a.push({season:e.season,episodes:t})}})),Object(g.a)({},t,{cast:n,seasons:a})},j=(n(68),n(32)),C=n.n(j),O=function(e){var t=e.tvShows,n=e.onMatchingTvShowClick,a=e.selectedTvShowId;return t&&0!==t.length?c.a.createElement("ul",{className:"matchingTvShows"},t.map((function(e){var t=a===e.id;return c.a.createElement("li",{key:e.id,onClick:function(){return n(e)},id:"matchingTvShow_".concat(e.id),className:C()("matchingTvShow",{matchingTvShowSelected:t})},c.a.createElement("img",{src:e.images.medium,alt:"".concat(e.title," poster"),className:"matchingTvShowImage"}),e.title)}))):null},k=(n(69),function(){return c.a.createElement("div",{className:"searchTvShowsFailure"},"Failed to fetch Matching Tv Shows!")}),N=(n(70),function(){return c.a.createElement("div",{className:"loadingEllipsis"},c.a.createElement("div",null),c.a.createElement("div",null),c.a.createElement("div",null),c.a.createElement("div",null))}),I=(n(71),function(e){var t=e.season;return t?c.a.createElement("dl",null,c.a.createElement("dt",{key:t},"Season "+t.season),t.episodes.map((function(e){return c.a.createElement("dd",{key:e.id},"".concat(e.number,". ").concat(e.name))}))):null}),B=function(e){var t=e.show;if(!t)return null;var n=t.cast?t.cast:[],a=t.seasons?t.seasons:[];return c.a.createElement("div",{className:"showDetails",id:"showDetails"},c.a.createElement("div",{className:"showImageContainer"},c.a.createElement("img",{src:t.images.original,alt:"".concat(t.title," poster"),className:"showImage"})),c.a.createElement("div",{className:"showDetailsContent"},c.a.createElement("h2",null,t.title),c.a.createElement("dl",null,c.a.createElement("dt",null,"Duration:"),c.a.createElement("dd",null,t.duration),c.a.createElement("dt",null,"Schedule:"),c.a.createElement("dd",null,"".concat(t.schedule.days.join(",")," at ").concat(t.schedule.time)),c.a.createElement("dt",null,"Status:"),c.a.createElement("dd",null,t.status),c.a.createElement("dt",null,"Type:"),c.a.createElement("dd",null,t.showType),c.a.createElement("dt",null,"Genres:"),t.genres.map((function(e){return c.a.createElement("dd",{key:e},e)})),c.a.createElement("dd",null,t.genres),c.a.createElement("dt",null,"Created By:"),c.a.createElement("dd",null,t.createdBy),c.a.createElement("dt",null,"Cast:"),n.map((function(e){return c.a.createElement("dd",{key:e},e)}))),c.a.createElement("div",null,c.a.createElement("h3",null,"Seasons"),a.map((function(e){return c.a.createElement(I,{key:e.season,season:e})})))))},D=function(e){var t=e.TvShowService,n=void 0===t?function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{httpClient:w.a},t=e.httpClient,n={fetchTvShows:function(e){return t.get("http://api.tvmaze.com/search/shows?q=".concat(e)).then((function(e){return e.data.map((function(e){return A(e.show)}))}))},fetchTvShowDetails:function(e){return Promise.all([n.fetchShow(e),n.fetShowCreator(e)]).then((function(e){return Object(g.a)({},e[0],{createdBy:e[1]})}))},fetchShow:function(e){return t.get("https://api.tvmaze.com/shows/".concat(e,"?embed[]=episodes&embed[]=cast")).then((function(e){return T(e.data)}))},fetShowCreator:function(e){return t.get("https://api.tvmaze.com/shows/".concat(e,"/crew")).then((function(e){return y(e.data)}))}};return n}():t,r=Object(a.useState)(""),l=Object(h.a)(r,2),o=l[0],s=l[1],i=Object(a.useState)(!1),u=Object(h.a)(i,2),m=u[0],d=u[1],f=Object(a.useState)(!1),p=Object(h.a)(f,2),E=p[0],S=p[1],b=Object(a.useState)([]),j=Object(h.a)(b,2),C=j[0],I=j[1],D=Object(a.useState)(null),M=Object(h.a)(D,2),P=M[0],R=M[1],x=Object(a.useState)(null),z=Object(h.a)(x,2),F=z[0],H=z[1];return c.a.createElement(c.a.Fragment,null,c.a.createElement("h1",null,"Search Tv Shows and Movies"),c.a.createElement(v,{phase:o,onPhraseChange:function(e){return s(e)},onSearchClick:function(){d(!0),S(!1),n.fetchTvShows(o).then(I).catch((function(){I([]),S(!0)})).finally((function(){d(!1)}))}}),m&&c.a.createElement(N,null),c.a.createElement(O,{tvShows:C,onMatchingTvShowClick:function(e){R(e.id),H(e),n.fetchTvShowDetails(e.id).then(H)},selectedTvShowId:P}),E&&c.a.createElement(k,null),c.a.createElement(B,{show:F}))},M=function(){return c.a.createElement("div",{className:"app"},c.a.createElement(o.a,null,c.a.createElement(s.a,{exact:!0,path:"/",component:m}),c.a.createElement(s.a,{path:"/search",component:D})))};l.a.render(c.a.createElement(c.a.StrictMode,null,c.a.createElement(M,null)),document.getElementById("root"))}},[[35,1,2]]]);
//# sourceMappingURL=main.6fe83ecc.chunk.js.map